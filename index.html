<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–û—Ç–∫—Ä—ã–≤–∞–µ–º –∑–∞—è–≤–∫—É</title>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      text-align: center;
      margin: 50px;
      background: #f8f9fa;
      color: #333;
    }
    h1 {
      color: #007acc;
    }
    button {
      padding: 14px 28px;
      font-size: 18px;
      background: #007acc;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #005a99;
    }
    .info {
      margin: 20px;
      font-size: 18px;
    }
    .tip {
      max-width: 600px;
      margin: 30px auto;
      font-size: 16px;
      color: #555;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <h1>–û—Ç–∫—Ä—ã–≤–∞–µ–º –∑–∞—è–≤–∫—É ‚Ññ<span id="id">...</span></h1>
  <button id="openBtn">‚ñ∂Ô∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å</button>
  <p class="info" id="status">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É</p>

  <div class="tip">
    <p>üí° –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è:</p>
    <ol style="text-align: left;">
      <li>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥–æ–∂–¥—ë—Ç 8 —Å–µ–∫—É–Ω–¥ ‚Äî —á—Ç–æ–±—ã SPA —É—Å–ø–µ–ª –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è</li>
      <li>–û—Ç–∫—Ä–æ–µ—Ç —Å—Å—ã–ª–∫—É —Å —Ö—ç—à–µ–º: <code>#requests/edit/...</code></li>
      <li>–í—Å–ø–ª—ã–≤–∞—é—â–∞—è –ø–∞–Ω–µ–ª—å –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è</li>
    </ol>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const requestId = urlParams.get('id');
    const status = document.getElementById('status');

    if (!requestId) {
      document.getElementById('id').textContent = '–æ—à–∏–±–∫–∞';
      status.textContent = '‚ùå –ù–µ —É–∫–∞–∑–∞–Ω –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏';
      throw new Error('No ID');
    }

    document.getElementById('id').textContent = requestId;

    const fullUrl = `https://techdo.sirius-ft.ru/admin/#requests/edit/${requestId}`;
    const tabName = 'techdo_admin';

    document.getElementById('openBtn').addEventListener('click', () => {
      const btn = document.getElementById('openBtn');
      btn.disabled = true;
      btn.style.background = '#ccc';
      status.textContent = '‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∏—Å—Ç–µ–º—É... –ñ–¥—ë–º 8 —Å–µ–∫—É–Ω–¥';

      setTimeout(() => {
        status.textContent = '‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ–º –∑–∞—è–≤–∫—É...';
        const tab = window.open(fullUrl, tabName);
        tab.focus();

        // –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º, –ø—É—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º
      }, 8000);
    });
  </script>
</body>
</html>
